{
  "project": {
    "name": "Saci",
    "description": "Saci Validate Command - Comprehensive PRP validation with educational feedback",
    "branchName": "saci/validate-command"
  },
  "features": [
    {
      "id": "F1",
      "name": "Saci Validate Command",
      "description": "Add comprehensive validation for PRP files to prevent runtime errors and educate users",
      "priority": 1,
      "tasks": [
        {
          "id": "F1-T1",
          "title": "Add validate command structure",
          "description": "Add 'validate' command case to saci.sh with basic structure and help text",
          "priority": 1,
          "passes": false,
          "context": {
            "files": ["saci.sh"],
            "libraries": [],
            "hints": [
              "Add case after 'status)' command (around line 1333)",
              "Accept optional file path argument, default to prp.json",
              "Create run_validate() function similar to run_reset()",
              "Update show_help() to document validate command",
              "Return exit code 0 on success, 1 on failure"
            ]
          },
          "acceptance": [
            "Command 'saci validate' executes without error",
            "Accepts optional file path: 'saci validate custom.json'",
            "Defaults to prp.json when no argument provided",
            "Help text updated with validate command documentation",
            "Returns exit code 0 when validation passes",
            "Bash syntax check passes: bash -n saci.sh"
          ],
          "tests": {
            "command": "bash -n saci.sh && echo 'Syntax OK'"
          }
        },
        {
          "id": "F1-T2",
          "title": "Validate JSON syntax and structure",
          "description": "Implement validation for JSON syntax and required top-level fields",
          "priority": 2,
          "passes": false,
          "dependencies": ["F1-T1"],
          "context": {
            "files": ["saci.sh"],
            "libraries": ["jq"],
            "hints": [
              "Use jq to validate JSON syntax: jq empty file.json 2>&1",
              "Check for required fields: .project, .features",
              "Verify .features is array with length > 0",
              "Extract line number from jq parse errors",
              "Use existing color variables: RED, GREEN, YELLOW, NC"
            ]
          },
          "acceptance": [
            "Detects invalid JSON syntax with error message",
            "Shows line number for JSON parse errors",
            "Verifies 'project' field exists",
            "Verifies 'features' field exists and is array",
            "Fails validation if features array is empty",
            "Returns exit code 1 on validation failure",
            "Bash syntax check passes: bash -n saci.sh"
          ],
          "tests": {
            "command": "bash -n saci.sh && echo 'Syntax OK'"
          }
        },
        {
          "id": "F1-T3",
          "title": "Validate task structure and uniqueness",
          "description": "Check all tasks have required fields, unique IDs, and correct formats",
          "priority": 3,
          "passes": false,
          "dependencies": ["F1-T2"],
          "context": {
            "files": ["saci.sh"],
            "libraries": ["jq"],
            "hints": [
              "Required task fields: id, title, description, priority, passes, context, acceptance, tests",
              "Use jq to check field existence: has(\"fieldname\")",
              "Validate ID format with regex: ^F[0-9]+-T[0-9]+$",
              "Collect all task IDs and check for duplicates using sort | uniq -d",
              "Check priority is number, passes is boolean, acceptance is non-empty array"
            ]
          },
          "acceptance": [
            "Validates all required task fields are present",
            "Detects duplicate task IDs across features",
            "Validates task ID format matches F[num]-T[num]",
            "Checks priority is a number",
            "Ensures passes is boolean (true or false)",
            "Verifies acceptance is non-empty array",
            "Confirms tests.command field exists",
            "Shows task ID and field name in error messages",
            "Bash syntax check passes: bash -n saci.sh"
          ],
          "tests": {
            "command": "bash -n saci.sh && echo 'Syntax OK'"
          }
        },
        {
          "id": "F1-T4",
          "title": "Validate dependencies and detect cycles",
          "description": "Check dependency references are valid and detect circular dependencies",
          "priority": 4,
          "passes": false,
          "dependencies": ["F1-T3"],
          "context": {
            "files": ["saci.sh"],
            "libraries": ["jq"],
            "hints": [
              "Reuse existing check_dependencies() function for circular detection",
              "Get all dependency IDs and verify they exist in PRP",
              "Use get_task_dependencies() to extract dependencies per task",
              "Validate dependencyMode is 'all' or 'any' when present",
              "Allow missing dependencies field for backward compatibility"
            ]
          },
          "acceptance": [
            "Detects circular dependencies using check_dependencies()",
            "Shows full cycle path when circular dependency found",
            "Validates all dependency IDs reference existing tasks",
            "Reports tasks with invalid dependency references",
            "Checks dependencyMode is 'all' or 'any' when present",
            "Accepts tasks without dependencies field (backward compatible)",
            "Exits with code 1 when invalid dependencies found",
            "Bash syntax check passes: bash -n saci.sh"
          ],
          "tests": {
            "command": "bash -n saci.sh && echo 'Syntax OK'"
          }
        },
        {
          "id": "F1-T5",
          "title": "Display validation summary and suggestions",
          "description": "Show formatted summary of validation results with suggestions for improvements",
          "priority": 5,
          "passes": false,
          "dependencies": ["F1-T4"],
          "context": {
            "files": ["saci.sh"],
            "libraries": [],
            "hints": [
              "Use consistent format: [✓] or [✗] prefix for each check",
              "Count total features, tasks, and dependencies",
              "Show warnings (yellow) for non-critical issues",
              "Display suggestions for detected problems",
              "Final message: '✓ PRP is valid and ready to use' when all pass",
              "Use existing color scheme matching other commands"
            ]
          },
          "acceptance": [
            "Shows green checkmarks [✓] for passed validations",
            "Shows red X [✗] for failed validations",
            "Displays count of features, tasks, and total dependencies",
            "Shows yellow warnings for non-critical issues",
            "Provides actionable suggestions for fixing errors",
            "Outputs success message when all validations pass",
            "Returns appropriate exit code (0 success, 1 failure)",
            "Bash syntax check passes: bash -n saci.sh"
          ],
          "tests": {
            "command": "bash -n saci.sh && echo 'Syntax OK'"
          }
        }
      ]
    }
  ]
}
